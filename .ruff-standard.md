# Standardized Ruff Configuration

All Python components in this monorepo use the same ruff configuration for consistency.

## Components
- `server/` - FastAPI server
- `rag/` - RAG system
- `config/` - Configuration loader
- `runtimes/universal/` - Universal runtime for HuggingFace models

## Standard Configuration

```toml
[tool.ruff]
line-length = 88         # Match Black's default
target-version = "py311"

# Enable auto-fixes
fix = true

# Select rulesets
lint.select = ["E", "F", "I", "B", "UP", "SIM"]

# Exclude some files
exclude = ["migrations", ".venv", "venv", "build", "dist", "__pycache__", "*.egg-info"]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401"]
```

## Rules Explained

- **E**: pycodestyle errors (PEP 8 violations)
- **F**: pyflakes (unused imports, undefined names)
- **I**: isort (import sorting)
- **B**: flake8-bugbear (common bugs and design problems)
- **UP**: pyupgrade (upgrade to newer Python syntax)
- **SIM**: flake8-simplify (simplify code)

## Pre-commit Integration

Pre-commit hooks automatically run ruff on all Python files in these components:
- `ruff check --fix` - Lints and auto-fixes issues
- `ruff format` - Formats code to match style

## Manual Usage

From any component directory:
```bash
# Check and auto-fix issues
uv run ruff check --fix .

# Format code
uv run ruff format .

# Check without fixing
uv run ruff check .
```

## Component-Specific Exclusions

Some components have additional exclusions:
- **rag/**: Also excludes `rag_env/`, `chroma_db/`
- **config/**: Also excludes `datamodel.py` (generated file)
